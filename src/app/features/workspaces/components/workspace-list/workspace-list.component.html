<mat-toolbar>
  <span>Workspaces</span>
  <span class="toolbar-spacer"></span>
  <button mat-icon-button (click)="openWorkspaceDialog()">
    <mat-icon>add</mat-icon>
  </button>
</mat-toolbar>

<div *ngIf="workspaces$ | async as workspaces; else loading" class="flex-fill flex-col">
  <mat-list class="flex-fill">
    <mat-list-item *ngFor="let workspace of workspaces.data">
      <mat-icon matListItemIcon>library_books</mat-icon>
      <div matListItemTitle>{{workspace.name}}</div>
      <div matListItemLine>{{(workspace.updated ?? workspace.created) | date:'d MMM y, h:mm a'}}</div>
      <div matListItemMeta>
        <button mat-icon-button (click)="openWorkspaceDialog(workspace)">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button (click)="openDeleteDialog(workspace)" color="warn">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
      <div matListItemLine>
        <button mat-button [routerLink]="workspace.id">Open</button>
      </div>
    </mat-list-item>
  </mat-list>
</div>

<ng-template #loading>
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</ng-template>
